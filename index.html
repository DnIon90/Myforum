<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Galerie Poze & Video cu Login</title>
<style>
body{font-family:Arial,sans-serif;background:#f2f6fb;color:#0b2236;margin:0;padding:18px}
.wrap{max-width:900px;margin:0 auto}
h1{text-align:center}
input,button{padding:10px;margin:4px;border-radius:6px;border:1px solid #ccc}
button{background:#0077ff;color:#fff;border:none;cursor:pointer}
.hidden{display:none}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-top:12px}
img,video{max-width:100%;border-radius:6px}
.card{background:#fff;padding:6px;border-radius:6px}
</style>
</head>
<body>
<div class="wrap">
<h1>Galerie Poze & Video</h1>

<div id="authDiv">
<h2>Login / Register</h2>
<input id="username" placeholder="Username"><br>
<input id="password" type="password" placeholder="Parolă"><br>
<button id="btnLogin">Login</button>
<button id="btnRegister">Register</button>
<div id="authMsg" style="color:red;margin-top:6px"></div>
</div>

<div id="appDiv" class="hidden">
<button id="btnLogout">Logout</button>
<h2>Upload Poze & Video</h2>
<input type="file" id="fileInput" multiple accept="image/*,video/*"><br>
<button id="btnUpload">Încarcă</button>
<div id="uploadMsg" style="margin-top:6px;color:green"></div>

<h3>Galeria ta</h3>
<div id="gallery" class="grid"></div>
</div>
</div>

<script>
// Simulare stocare utilizatori în localStorage
let users = JSON.parse(localStorage.getItem('users') || '{}');
let currentUser = null;

// Helpers
function saveUsers(){ localStorage.setItem('users', JSON.stringify(users)); }
function showAuth(msg){ document.getElementById('authDiv').classList.remove('hidden'); document.getElementById('appDiv').classList.add('hidden'); document.getElementById('authMsg').innerText=msg||'';}
function showApp(){ document.getElementById('authDiv').classList.add('hidden'); document.getElementById('appDiv').classList.remove('hidden'); loadGallery();}

// Login/Register
document.getElementById('btnRegister').addEventListener('click', ()=>{
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value.trim();
  if(!u||!p){ showAuth('Completează username și parolă'); return;}
  if(users[u]){ showAuth('Username deja există'); return;}
  users[u] = { password: p, files: [] };
  saveUsers();
  showAuth('Cont creat, te poți loga');
});

document.getElementById('btnLogin').addEventListener('click', ()=>{
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value.trim();
  if(!u||!p){ showAuth('Completează username și parolă'); return;}
  if(!users[u] || users[u].password !== p){ showAuth('Username/parolă incorecte'); return;}
  currentUser = u;
  showApp();
});

document.getElementById('btnLogout').addEventListener('click', ()=>{
  currentUser = null; showAuth();
});

// Upload
document.getElementById('btnUpload').addEventListener('click', ()=>{
  if(!currentUser) return;
  const files = document.getElementById('fileInput').files;
  if(files.length===0){ alert('Selectează fișiere'); return;}
  for(const f of files){
    const reader = new FileReader();
    reader.onload = e=>{
      users[currentUser].files.push({name:f.name,type:f.type,data:e.target.result});
      saveUsers();
      loadGallery();
    };
    reader.readAsDataURL(f);
  }
});

// Load gallery
function loadGallery(){
  if(!currentUser) return;
  const gal = document.getElementById('gallery');
  gal.innerHTML = '';
  users[currentUser].files.forEach(f=>{
    const card = document.createElement('div'); card.className='card';
    if(f.type.startsWith('image/')){
      const img = document.createElement('img'); img.src=f.data; card.appendChild(img);
    } else if(f.type.startsWith('video/')){
      const v = document.createElement('video'); v.src=f.data; v.controls=true; card.appendChild(v);
    }
    gal.appendChild(card);
  });
}

// La încărcare, verifică dacă există user curent (nu persistă sesiune)
showAuth();
</script>
</body>
</html>